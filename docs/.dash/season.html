<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Season Summary</title>
  <link rel="stylesheet" href="ff.css">
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; padding: 16px; }
    .cards { display:flex; flex-wrap:wrap; gap:12px; margin-bottom:16px; }
    .card { border:1px solid #e0e0e0; border-radius:8px; background:#fff; padding:12px 16px; flex:1 1 180px; }
    .card-title { font-size:13px; color:#555; text-transform:uppercase; letter-spacing:0.05em; }
    .card-value { font-size:24px; font-weight:600; margin-top:4px; }
    .chart-container { margin:24px 0; }
    .summary-table, .waiver-table { width:100%; border-collapse:collapse; margin-top:12px; }
    .summary-table th, .summary-table td, .waiver-table th, .waiver-table td { padding:6px 8px; border-bottom:1px solid #eee; text-align:left; }
    details { margin-top:12px; }
    .links { margin:24px 0; display:flex; gap:12px; flex-wrap:wrap; }
    .week-link { margin-left:6px; font-size:12px; }
    .week-link a { color:#1f78b4; text-decoration:none; }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <h1>Season Summary</h1>
  <div class="cards"><div class='card'><div class='card-title'>Weeks</div><div class='card-value'>2</div></div><div class='card'><div class='card-title'>Avg lineup Δ</div><div class='card-value'>0.24</div></div><div class='card'><div class='card-title'>Waivers</div><div class='card-value'>0</div></div><div class='card'><div class='card-title'>Trades</div><div class='card-value'>11</div></div></div>

  <div class="chart-container">
    <h2>Lineup Delta by Week</h2>
    <canvas id="lineupChart" height="120"></canvas>
  </div>
  <div class="chart-container">
    <h2>Waivers & Trades by Week</h2>
    <canvas id="volumeChart" height="120"></canvas>
  </div>

  <section>
    <h2>Weekly Summary</h2>
    <table class='summary-table'><thead><tr><th>Week</th><th>Lineup Δ</th><th>Waivers</th><th>Trades</th><th>Suggestions</th><th>Top waivers</th></tr></thead><tbody><tr><td>W5 <span class='week-link'><a href='results_w5.html'>Results</a></span></td><td>0.48</td><td>0</td><td>11</td><td>2</td><td>—</td></tr><tr><td>W4</td><td>0.00</td><td>0</td><td>0</td><td>0</td><td>—</td></tr></tbody></table>
  </section>

  <section>
    <h2>Top Waivers</h2>
    <p>No waiver recommendations recorded.</p>
  </section>

  <div class="links">
    <a href="index.html">⬅︎ Back to .dash index</a>
    <a href="../ff/index.html">Dashboard</a>
    <a href="lineup_delta_w5.html">Latest Lineup Delta</a>
  </div>

  <script id="season-chart-data" type="application/json">[{"week": 4, "lineup_delta": 0.0, "waivers_count": 0, "trades_count": 0, "suggestions_count": 0, "top_waivers": []}, {"week": 5, "lineup_delta": 0.48, "waivers_count": 0, "trades_count": 11, "suggestions_count": 2, "top_waivers": []}]</script>
  <script>
    const chartRows = JSON.parse(document.getElementById('season-chart-data').textContent || '[]');
    const labels = chartRows.map(row => `W\${row.week}`);
    const lineupDelta = chartRows.map(row => typeof row.lineup_delta === 'number' ? row.lineup_delta : 0);
    const waivers = chartRows.map(row => row.waivers_count || 0);
    const trades = chartRows.map(row => row.trades_count || 0);

    const lineupCtx = document.getElementById('lineupChart').getContext('2d');
    new Chart(lineupCtx, {
      type: 'line',
      data: {
        labels,
        datasets: [{
          label: 'Lineup Δ',
          data: lineupDelta,
          borderColor: '#2563eb',
          backgroundColor: 'rgba(37, 99, 235, 0.2)',
          tension: 0.25,
          fill: true,
        }],
      },
      options: {
        responsive: true,
        plugins: { legend: { display: true } },
        scales: {
          y: { beginAtZero: true },
        },
      },
    });

    const volumeCtx = document.getElementById('volumeChart').getContext('2d');
    new Chart(volumeCtx, {
      type: 'bar',
      data: {
        labels,
        datasets: [
          {
            label: 'Waivers',
            data: waivers,
            backgroundColor: 'rgba(99, 102, 241, 0.6)',
            stack: 'counts',
          },
          {
            label: 'Trades',
            data: trades,
            backgroundColor: 'rgba(167, 139, 250, 0.6)',
            stack: 'counts',
          },
        ],
      },
      options: {
        responsive: true,
        plugins: { legend: { display: true } },
        scales: {
          x: { stacked: true },
          y: { stacked: true, beginAtZero: true },
        },
      },
    });
  </script>
</body>
</html>
